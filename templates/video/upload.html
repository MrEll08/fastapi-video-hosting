<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Fastube ‚Äì –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ</title>
    <style>
        body {
            font-family: sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }
        header {
            background-color: #20232a;
            color: white;
            padding: 20px;
            text-align: center;
        }
        main {
            padding: 40px;
            text-align: center;
        }
        .upload-box {
            background-color: white;
            padding: 30px;
            margin: 0 auto;
            width: 80%;
            max-width: 600px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        input[type="text"], textarea, input[type="file"] {
            display: block;
            margin: 15px auto;
            padding: 10px;
            width: 80%;
            max-width: 400px;
            font-size: 1em;
        }
        textarea {
            resize: vertical;
            height: 100px;
        }
        button {
            padding: 12px 24px;
            font-size: 1em;
            background-color: #20232a;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #444851;
        }
        footer {
            text-align: center;
            padding: 20px;
            font-size: 0.9em;
            color: #777;
        }
    </style>
</head>
<body>

<header>
    <h1>üì§ –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ Fastube</h1>
    <p>–ü–æ–¥–µ–ª–∏—Å—å —Å–≤–æ–∏–º –≤–∏–¥–µ–æ</p>
</header>

<main>
    <div class="upload-box">
        <h2>–ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤–æ–µ –≤–∏–¥–µ–æ</h2>
        <form id="upload-form" enctype="multipart/form-data">
            <input type="text" name="title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ" required>
            <textarea name="description" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –≤–∏–¥–µ–æ" required></textarea>
            <input type="file" name="video_file" accept="video/mp4" required>
            <button type="submit">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
        </form>
        <p id="status" style="margin-top: 20px;"></p>
    </div>
</main>

<footer>
    &copy; 2025 Fastube ‚Äì –°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –Ω–∞ FastAPI
</footer>

<script>
    document.getElementById('upload-form').addEventListener('submit', async function (e) {
        e.preventDefault();

        const formData = new FormData(this);
        const status = document.getElementById('status');
        status.textContent = '–ó–∞–≥—Ä—É–∑–∫–∞...';

        try {
            const response = await fetch('/video/upload', {
                method: 'POST',
                body: formData
            });

            if (response.ok) {
                const data = await response.json()
                alert(data.message)
                status.textContent = '‚úÖ –í–∏–¥–µ–æ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ!';
                window.location.href = `/video/${data.video_id}`
            } else {
                status.textContent = response.message || '‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ';
            }
        } catch (err) {
            console.error(err);
            status.textContent = '‚ö†Ô∏è –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞';
        }
    });
</script>

</body>
</html>
